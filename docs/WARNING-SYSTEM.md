# Context-Aware Warning System

## Overview

The Space Weirdos Warband Builder features an intelligent warning system that provides contextual feedback based on your warband composition. The system helps you understand which point limits apply to each weirdo and warns you when approaching those limits.

## How It Works

### Warning Threshold

Warnings appear when a weirdo's cost is **within 3 points** of their applicable limit. This gives you advance notice to make adjustments before hitting the actual limit.

### Context-Aware Logic

The warning system adapts based on your warband's current state:

#### Scenario 1: No 25-Point Weirdo Exists

When building your first weirdo or when no weirdo exceeds 20 points:

- **18-20 points**: ⚠️ "Cost is within X points of the 20-point limit"
- **23-25 points**: ⚠️ "Cost is within X points of the 25-point limit (premium weirdo slot)"

*Why both warnings?* Your weirdo could use either the standard 20-point limit or claim the premium 25-point slot.

#### Scenario 2: 25-Point Weirdo Already Exists (Different Weirdo)

When another weirdo in your warband is already 21-25 points:

- **18-20 points**: ⚠️ "Cost is within X points of the 20-point limit"
- **21+ points**: ❌ Error - exceeds limit

*Why only 20-point warnings?* The premium slot is taken, so this weirdo is limited to 20 points.

#### Scenario 3: Editing the 25-Point Weirdo

When editing a weirdo that's already using the premium slot (21-25 points):

- **23-25 points**: ⚠️ "Cost is within X points of the 25-point limit"
- **18-20 points**: No warning (already past this limit)

*Why only 25-point warnings?* This weirdo is using the premium slot and can go up to 25 points.

## Visual Indicators

### Warning States
- **Orange/Yellow Border**: Approaching limit (within 3 points)
- **Warning Icon**: ⚠️ symbol with descriptive text
- **Clear Messaging**: Explains which limit applies and why

### Error States
- **Red Border**: Exceeding limit
- **Error Icon**: ❌ symbol with error message
- **Blocking**: Prevents warband finalization

## Examples

### Example 1: Building Your First Weirdo

```
Weirdo Cost: 19 points
Warning: "Cost is within 1 point of the 20-point limit"
Action: You can stay at 20 or continue to 25 for the premium slot
```

### Example 2: Premium Weirdo in Warband

```
Warband: Has a 23-point weirdo (premium slot used)
New Weirdo Cost: 19 points
Warning: "Cost is within 1 point of the 20-point limit"
Action: Must stay at 20 or below (premium slot taken)
```

### Example 3: Editing Premium Weirdo

```
Editing: The 23-point weirdo (premium slot)
Cost: 24 points
Warning: "Cost is within 1 point of the 25-point limit"
Action: Can go up to 25 points maximum
```

## Technical Implementation

### Backend Integration

Warnings are generated by the backend `ValidationService` to ensure consistency with game rules:

- Analyzes warband composition to determine applicable limits
- Generates appropriate warning messages
- Returns warnings alongside validation errors

### Frontend Display

The frontend receives warnings from the API and displays them:

- `WeirdoCostDisplay` shows warnings for individual weirdos
- `WarbandCostDisplay` shows warband-level warnings (15-point threshold)
- Real-time updates as you modify weirdos

## Benefits

1. **Contextual Guidance**: Understand which limits actually apply
2. **Advance Warning**: 3-point threshold gives time to adjust
3. **Clear Messaging**: Know why a warning appears
4. **Consistent Rules**: Backend ensures game rule compliance
5. **Better UX**: No confusing warnings for inapplicable limits

## Game Rules Reference

### Individual Weirdo Limits
- **Standard Limit**: 20 points (applies to most weirdos)
- **Premium Limit**: 25 points (exactly one weirdo per warband)
- **25-Point Rule**: Only one weirdo may be 21-25 points

### Warband Limits
- **75-Point Games**: Total warband cost ≤ 75 points
- **125-Point Games**: Total warband cost ≤ 125 points
- **Warning Threshold**: Within 15 points of total limit

This system helps you build legal, competitive warbands while understanding the rules as you play!
